{
  "version": 3,
  "sources": ["src\\dev_server\\server-data.ts", "src\\lib\\database-drivers\\dbdriver-localhost.ts", "src\\lib\\ericchase\\Utility\\UpdateMarker.ts", "src\\lib\\ericchase\\Utility\\Console.ts", "src\\database\\queries.module.ts"],
  "sourcesContent": [
    "export const server_hostname = '127.0.0.1';\nexport const server_port = '8000';\n\nexport const server_http = `http://${server_hostname}:${server_port}`;\nexport const server_ws = `ws://${server_hostname}:${server_port}`;\n",
    "export function getLocalhost(address: string) {\n  return {\n    async query(text: string, params: any[]): Promise<any> {\n      const response = await fetch(`${address}/database/query`, {\n        method: 'POST',\n        body: JSON.stringify({ text, params }),\n      });\n      if (response.status < 200 || response.status > 299) {\n        throw await response.json();\n      }\n      return await response.json();\n    },\n  };\n}\n",
    "export class UpdateMarker {\n  updated = false;\n  constructor(readonly $manager: UpdateMarkerManager) {}\n  reset() {\n    this.$manager.resetMarker(this);\n  }\n}\n\nexport class UpdateMarkerManager {\n  $marks = new Set<UpdateMarker>();\n  getNewMarker() {\n    const marker = new UpdateMarker(this);\n    this.$marks.add(marker);\n    return marker;\n  }\n  resetMarker(mark: UpdateMarker) {\n    mark.updated = false;\n    this.$marks.add(mark);\n  }\n  updateMarkers() {\n    for (const mark of this.$marks) {\n      this.$marks.delete(mark);\n      mark.updated = true;\n    }\n  }\n}\n\nexport class DataSetMarker<T> {\n  dataset = new Set<T>();\n  constructor(readonly $manager: DataSetMarkerManager<T>) {}\n  reset() {\n    this.$manager.resetMarker(this);\n  }\n}\n\nexport class DataSetMarkerManager<T> {\n  $marks = new Set<DataSetMarker<T>>();\n  getNewMarker() {\n    const marker = new DataSetMarker<T>(this);\n    this.$marks.add(marker);\n    return marker;\n  }\n  resetMarker(mark: DataSetMarker<T>) {\n    mark.dataset.clear();\n    this.$marks.add(mark);\n  }\n  updateMarkers(data: T) {\n    for (const mark of this.$marks) {\n      mark.dataset.add(data);\n    }\n  }\n}\n",
    "import { UpdateMarkerManager } from './UpdateMarker.js';\n\nconst marker_manager = new UpdateMarkerManager();\nlet newline_count = 0;\n\nexport function GetConsoleMarker() {\n  return marker_manager.getNewMarker();\n}\n\nexport function ConsoleError(...items: any[]) {\n  // biome-ignore lint: this let's us search for undesired console[error]s\n  console['error'](...items);\n  newline_count = 0;\n  marker_manager.updateMarkers();\n}\n\nexport function ConsoleErrorWithDate(...items: any[]) {\n  // biome-ignore lint: this let's us search for undesired console[error]s\n  console['error'](`[${new Date().toLocaleTimeString()}]`, ...items);\n  newline_count = 0;\n  marker_manager.updateMarkers();\n}\n\nexport function ConsoleLog(...items: any[]) {\n  // biome-ignore lint: this let's us search for undesired console[log]s\n  console['log'](...items);\n  newline_count = 0;\n  marker_manager.updateMarkers();\n}\n\nexport function ConsoleLogWithDate(...items: any[]) {\n  // biome-ignore lint: this let's us search for undesired console[log]s\n  console['log'](`[${new Date().toLocaleTimeString()}]`, ...items);\n  newline_count = 0;\n  marker_manager.updateMarkers();\n}\n\nexport function ConsoleNewline(ensure_count = 1) {\n  for (let i = newline_count; i < ensure_count; i++) {\n    // biome-ignore lint: this let's us search for undesired console[log]s\n    console['log']();\n    newline_count++;\n  }\n  marker_manager.updateMarkers();\n}\n\nexport function ConsoleLogToLines(items: Iterable<any>) {\n  if (typeof items === 'string') {\n    ConsoleLog(items);\n  } else {\n    for (const item of items) {\n      ConsoleLog(item);\n    }\n  }\n}\n\nexport function ConsoleErrorToLines(items: Iterable<any>) {\n  if (typeof items === 'string') {\n    ConsoleError(items);\n  } else {\n    for (const item of items) {\n      ConsoleError(item);\n    }\n  }\n}\n",
    "import { server_http } from 'src/dev_server/server-data.js';\nimport { getLocalhost } from 'src/lib/database-drivers/dbdriver-localhost.js';\nimport { ConsoleError } from 'src/lib/ericchase/Utility/Console.js';\n\n// const db = DatabaseDriver.getNeon(<insert a valid connection string>);\nconst db = getLocalhost(server_http);\n\n//                                                                          \\\\\n//\n// Postgres Queries\n\nexport async function DatabaseConnected(): Promise<boolean> {\n  const q = 'SELECT 1';\n  await db.query(q, []);\n  return true;\n}\n\nexport async function CreateTable(name: string): Promise<void> {\n  const q = `\n      CREATE TABLE ${name} (\n        id SERIAL PRIMARY KEY,\n        name TEXT NOT NULL,\n        email TEXT NOT NULL\n      );\n    `;\n  await db.query(q, []);\n}\nexport async function TableExists(name: string): Promise<boolean> {\n  const q = `\n    SELECT EXISTS (\n      SELECT 1 \n      FROM information_schema.tables \n      WHERE table_schema = 'public' \n      AND table_name = $1\n    );\n  `;\n  const { exists } = (await db.query(q, [name]))[0];\n  return exists ?? false;\n}\n\n//                                                                          \\\\\n//\n// Database Functions\n\nexport async function EnsureTableExists(name: string): Promise<{ created: boolean; exists: boolean }> {\n  try {\n    if ((await TableExists(name)) === true) {\n      return { created: false, exists: true };\n    }\n    await CreateTable(name);\n    if ((await TableExists(name)) === true) {\n      return { created: true, exists: true };\n    }\n  } catch (error) {\n    ConsoleError(error);\n  }\n  return { created: false, exists: false };\n}\n"
  ],
  "mappings": "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",
  "debugId": "2476FB5337DDF80464756E2164756E21",
  "names": []
}